<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracking - <%= shortCode %></title>
    <link rel="icon" type="image/svg+xml" href="/dhivijit.svg">
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Header */
        .tracking-header {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .tracking-header h1 {
            color: #667eea;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .shortcode-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-family: monospace;
            font-weight: bold;
            display: inline-block;
        }

        /* Action Buttons */
        .action-buttons .btn {
            margin-left: 0.5rem;
        }

        /* Stats Cards */
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            height: 100%;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            margin-right: 1.5rem;
            flex-shrink: 0;
        }

        .stat-icon.visits {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .stat-icon.humans {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .stat-icon.bots {
            background: linear-gradient(135deg, #ffa751 0%, #ffe259 100%);
        }

        .stat-content h3 {
            margin: 0;
            font-size: 2rem;
            font-weight: 700;
            color: #333;
        }

        .stat-content p {
            margin: 0;
            color: #6c757d;
            font-size: 0.9rem;
        }

        /* Link Info Card */
        .info-card {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .info-card h5 {
            color: #667eea;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .info-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e9ecef;
        }

        .info-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .info-label {
            font-weight: 600;
            color: #495057;
            min-width: 140px;
            display: flex;
            align-items: center;
        }

        .info-label i {
            width: 20px;
            margin-right: 8px;
            color: #667eea;
        }

        .info-value {
            flex: 1;
            color: #333;
            word-break: break-all;
        }

        .info-value a {
            color: #667eea;
            text-decoration: none;
        }

        .info-value a:hover {
            text-decoration: underline;
        }

        /* Card Styling */
        .card {
            border: none;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .card-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 1rem 1.5rem;
        }

        .card-header h5 {
            margin: 0;
            font-weight: 600;
        }

        /* Table Styling */
        .table-responsive {
            background: white;
            border-radius: 10px;
        }

        .table {
            margin-bottom: 0;
        }

        .table thead th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            font-weight: 600;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .table tbody tr {
            transition: background-color 0.2s ease;
        }

        .table tbody tr:hover {
            background-color: #f8f9fa;
        }

        .table td {
            vertical-align: middle;
            padding: 1rem 0.75rem;
            border-color: #e9ecef;
        }

        /* Badges */
        .badge-bot {
            background: linear-gradient(135deg, #ffa751 0%, #ffe259 100%);
            color: #000;
            padding: 0.4rem 0.8rem;
            font-weight: 600;
        }

        .badge-human {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: #fff;
            padding: 0.4rem 0.8rem;
            font-weight: 600;
        }

        /* Truncate */
        .truncate {
            max-width: 250px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: inline-block;
            vertical-align: middle;
        }

        /* Clickable UA */
        .clickable-ua {
            cursor: pointer;
            color: #667eea;
            text-decoration: none;
            font-family: monospace;
            font-size: 0.9rem;
            transition: color 0.2s ease;
        }

        .clickable-ua:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        /* Modal Styling */
        .modal-content {
            border: none;
            border-radius: 10px;
            overflow: hidden;
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
        }

        .modal-body pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            word-wrap: break-word;
            white-space: pre-wrap;
            border: 1px solid #dee2e6;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .empty-state i {
            font-size: 4rem;
            color: #dee2e6;
            margin-bottom: 1.5rem;
        }

        .empty-state h4 {
            color: #495057;
            margin-bottom: 1rem;
        }

        .empty-state p {
            color: #6c757d;
        }

        /* Button Styling */
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        .btn-danger:hover, .btn-info:hover, .btn-secondary:hover {
            transform: translateY(-2px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .tracking-header h1 {
                font-size: 1.75rem;
            }

            .action-buttons {
                margin-top: 1rem;
            }

            .action-buttons .btn {
                margin-left: 0;
                margin-right: 0.5rem;
                margin-bottom: 0.5rem;
            }

            .stat-card {
                margin-bottom: 1rem;
            }

            .info-item {
                flex-direction: column;
            }

            .info-label {
                margin-bottom: 0.5rem;
            }

            .table {
                font-size: 0.85rem;
            }

            .table td, .table th {
                padding: 0.5rem 0.25rem;
                font-size: 0.8rem;
            }

            /* Hide less critical columns on mobile */
            @media (max-width: 576px) {
                .table thead th:nth-child(4),
                .table tbody td:nth-child(4),
                .table thead th:nth-child(8),
                .table tbody td:nth-child(8) {
                    display: none;
                }
            }
        }

        /* Custom Scrollbar */
        .table-responsive::-webkit-scrollbar {
            height: 8px;
        }

        .table-responsive::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .table-responsive::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 4px;
        }

        .table-responsive::-webkit-scrollbar-thumb:hover {
            background: #764ba2;
        }
    </style>
</head>
<body>
    <div class="container-fluid px-3 px-md-5 py-4">
        <!-- Header -->
        <div class="tracking-header">
            <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center">
                <div class="mb-3 mb-md-0">
                    <h1><i class="fas fa-chart-line mr-3"></i>Tracking Analytics</h1>
                    <span class="shortcode-badge"><i class="fas fa-link mr-2"></i><%= shortCode %></span>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-info" onclick="showQrModal()">
                        <i class="fas fa-qrcode mr-1"></i>QR Code
                    </button>
                    <form method="POST" action="/admin/delete" class="d-inline" onsubmit="return confirmDelete()">
                        <input type="hidden" name="shortened" value="<%= shortCode %>">
                        <button type="submit" class="btn btn-danger">
                            <i class="fas fa-trash-alt mr-1"></i>Delete
                        </button>
                    </form>
                    <a href="/admin" class="btn btn-secondary">
                        <i class="fas fa-arrow-left mr-1"></i>Back
                    </a>
                </div>
            </div>
        </div>

        <!-- Stats Cards Row -->
        <%
            const totalVisits = link.visitCount || 0;
            const trackedVisits = tracking && tracking.visits ? tracking.visits.length : 0;
            const humanVisits = tracking && tracking.visits ? tracking.visits.filter(v => !v.isBot).length : 0;
            const botVisits = tracking && tracking.visits ? tracking.visits.filter(v => v.isBot).length : 0;
        %>
        <div class="row mb-4">
            <div class="col-md-3 col-sm-6 mb-3">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-mouse-pointer"></i>
                    </div>
                    <div class="stat-content">
                        <h3><%= totalVisits %></h3>
                        <p>Total Visits</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6 mb-3">
                <div class="stat-card">
                    <div class="stat-icon visits">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="stat-content">
                        <h3><%= trackedVisits %></h3>
                        <p>Tracked Visits</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6 mb-3">
                <div class="stat-card">
                    <div class="stat-icon humans">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="stat-content">
                        <h3><%= humanVisits %></h3>
                        <p>Human Visits</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6 mb-3">
                <div class="stat-card">
                    <div class="stat-icon bots">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="stat-content">
                        <h3><%= botVisits %></h3>
                        <p>Bot Visits</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Link Details Card -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="info-card">
                    <h5><i class="fas fa-info-circle mr-2"></i>Link Details</h5>
                    <div class="info-item">
                        <div class="info-label">
                            <i class="fas fa-code"></i>Short Code
                        </div>
                        <div class="info-value">
                            <code><%= shortCode %></code>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">
                            <i class="fas fa-external-link-alt"></i>Target URL
                        </div>
                        <div class="info-value">
                            <a href="<%= link.targetUrl %>" target="_blank"><%= link.targetUrl %></a>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">
                            <i class="far fa-calendar-alt"></i>Created
                        </div>
                        <div class="info-value">
                            <%= link.createdAt ? new Date(link.createdAt).toLocaleString() : 'N/A' %>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">
                            <i class="fas fa-link"></i>Full URL
                        </div>
                        <div class="info-value">
                            <code><%= `${link.targetUrl.match(/^https?:\/\/([^\/]+)/)?.[0] || ''}/${shortCode}` %></code>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Visit History Table -->
        <div class="row">
            <div class="col-12">
                <% if (tracking && tracking.visits && tracking.visits.length > 0) { %>
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-history mr-2"></i>Visit History</h5>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-hover mb-0">
                                    <thead>
                                        <tr>
                                            <th style="width: 5%;">#</th>
                                            <th style="width: 15%;">Timestamp</th>
                                            <th style="width: 12%;">IP Address</th>
                                            <th style="width: 15%;">Location</th>
                                            <th style="width: 13%;">User Agent</th>
                                            <th style="width: 12%;">Device</th>
                                            <th style="width: 8%;" class="text-center">Type</th>
                                            <th style="width: 20%;">Referrer</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <% tracking.visits.slice().reverse().forEach((visit, index) => { %>
                                        <tr>
                                            <td><strong><%= visit.visitNumber || (tracking.visits.length - index) %></strong></td>
                                            <td class="small">
                                                <i class="far fa-clock mr-1"></i><%= new Date(visit.timestamp).toLocaleString() %>
                                            </td>
                                            <td class="small">
                                                <code><%= visit.ipAddress %></code>
                                            </td>
                                            <td class="small">
                                                <% if (visit.geographic && visit.geographic.city) { %>
                                                    <i class="fas fa-map-marker-alt mr-1 text-danger"></i><%= visit.geographic.city %>, <%= visit.geographic.country %>
                                                    <% if (visit.geographic.timezone) { %>
                                                        <br><small class="text-muted"><i class="far fa-clock mr-1"></i><%= visit.geographic.timezone %></small>
                                                    <% } %>
                                                <% } else { %>
                                                    <span class="text-muted">N/A</span>
                                                <% } %>
                                            </td>
                                            <td>
                                                <% if (visit.userAgent && visit.userAgent.complete) { %>
                                                    <span class="clickable-ua" onclick="showUserAgentModal(<%= index %>)">
                                                        <i class="fas fa-info-circle mr-1"></i>View Details
                                                    </span>
                                                <% } else { %>
                                                    <span class="text-muted">N/A</span>
                                                <% } %>
                                            </td>
                                            <td class="small">
                                                <% if (visit.userAgent && visit.userAgent.device) { %>
                                                    <i class="fas fa-<%= visit.userAgent.device.type === 'mobile' ? 'mobile-alt' : visit.userAgent.device.type === 'tablet' ? 'tablet-alt' : 'desktop' %> mr-1"></i><%= visit.userAgent.device.type || 'desktop' %>
                                                    <% if (visit.userAgent.device.model) { %>
                                                        <br><small class="text-muted"><%= visit.userAgent.device.model %></small>
                                                    <% } %>
                                                <% } else { %>
                                                    <i class="fas fa-desktop mr-1"></i><span class="text-muted">desktop</span>
                                                <% } %>
                                            </td>
                                            <td class="text-center">
                                                <% if (visit.isBot) { %>
                                                    <span class="badge badge-bot"><i class="fas fa-robot mr-1"></i>Bot</span>
                                                <% } else { %>
                                                    <span class="badge badge-human"><i class="fas fa-user mr-1"></i>Human</span>
                                                <% } %>
                                            </td>
                                            <td class="small">
                                                <% if (visit.referrer && visit.referrer !== 'Direct') { %>
                                                    <i class="fas fa-external-link-alt mr-1"></i><span class="truncate" title="<%= visit.referrer %>"><%= visit.referrer %></span>
                                                <% } else { %>
                                                    <i class="fas fa-level-down-alt mr-1"></i><span class="text-muted">Direct</span>
                                                <% } %>
                                            </td>
                                        </tr>
                                        <% }); %>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                <% } else { %>
                    <!-- No Tracking Data -->
                    <div class="empty-state">
                        <i class="fas fa-chart-line"></i>
                        <h4>No Tracking Data Available</h4>
                        <p>This link has been visited <%= link.visitCount %> time(s), but detailed tracking data is not available yet.</p>
                        <hr style="max-width: 300px; margin: 1.5rem auto;">
                        <p class="mb-3">Tracking data will appear here after the next visit to this shortened link.</p>
                        <a href="/admin" class="btn btn-primary mt-2">
                            <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                        </a>
                    </div>
                <% } %>
            </div>
        </div>

        <!-- Back Button -->
        <% if (tracking && tracking.visits && tracking.visits.length > 0) { %>
        <div class="row mt-4">
            <div class="col-12 text-right">
                <a href="/admin" class="btn btn-primary">
                    <i class="fas fa-arrow-left mr-2"></i>Back to Admin Dashboard
                </a>
            </div>
        </div>
        <% } %>
    </div>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- QR generation library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>

    <!-- User Agent Modal -->
    <div class="modal fade" id="userAgentModal" tabindex="-1" role="dialog" aria-labelledby="userAgentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userAgentModalLabel">
                        <i class="fas fa-info-circle mr-2"></i>User Agent Details
                    </h5>
                    <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h6><i class="fas fa-code mr-2"></i>Complete User Agent String:</h6>
                    <pre id="uaComplete"></pre>
                    
                    <h6 class="mt-4"><i class="fas fa-list mr-2"></i>Parsed Information:</h6>
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <th style="width: 180px;"><i class="fab fa-chrome mr-2"></i>Browser</th>
                                <td id="uaBrowser"></td>
                            </tr>
                            <tr>
                                <th><i class="fab fa-windows mr-2"></i>Operating System</th>
                                <td id="uaOS"></td>
                            </tr>
                            <tr>
                                <th><i class="fas fa-mobile-alt mr-2"></i>Device</th>
                                <td id="uaDevice"></td>
                            </tr>
                            <tr>
                                <th><i class="fas fa-cog mr-2"></i>Engine</th>
                                <td id="uaEngine"></td>
                            </tr>
                            <tr>
                                <th><i class="fas fa-microchip mr-2"></i>CPU Architecture</th>
                                <td id="uaCPU"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        <i class="fas fa-times mr-1"></i>Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- QR Code Modal -->
    <div class="modal fade" id="qrModal" tabindex="-1" role="dialog" aria-labelledby="qrModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="qrModalLabel">
                        <i class="fas fa-qrcode mr-2"></i>QR Code - <%= shortCode %>
                    </h5>
                    <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body text-center">
                    <div id="qrContainer"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        <i class="fas fa-times mr-1"></i>Close
                    </button>
                    <button type="button" class="btn btn-primary" onclick="downloadQr()">
                        <i class="fas fa-download mr-1"></i>Download
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Store visit data for modal display
        const visitsData = <%- JSON.stringify(tracking && tracking.visits ? tracking.visits.slice().reverse() : []) %>;
        const shortCode = '<%= shortCode %>';
        const fullUrl = window.location.origin + '/' + shortCode;
        let lastQrCanvas = null;
        
        function confirmDelete() {
            return confirm('Are you sure you want to delete the shortened link "' + shortCode + '"? This action cannot be undone and all tracking data will be lost.');
        }
        
        function showQrModal() {
            const qrContainer = document.getElementById('qrContainer');
            qrContainer.innerHTML = ''; // clear previous
            
            // Generate QR (display size 200x200)
            QRCode.toCanvas(fullUrl, { width: 200 }, function (err, canvas) {
                if (err) {
                    console.error(err);
                    qrContainer.innerText = 'Failed to generate QR code.';
                    lastQrCanvas = null;
                } else {
                    qrContainer.appendChild(canvas);
                    lastQrCanvas = canvas;
                    // Show the URL below for copy
                    const p = document.createElement('p');
                    p.className = 'mt-2';
                    p.innerText = fullUrl;
                    qrContainer.appendChild(p);
                }
            });
            
            // Show modal
            $('#qrModal').modal('show');
        }
        
        function downloadQr() {
            if (!fullUrl) {
                alert('No QR code available to download.');
                return;
            }
            // Generate a larger QR (500x500) for download
            QRCode.toCanvas(fullUrl, { width: 500 }, function (err, canvas) {
                if (err) {
                    console.error(err);
                    alert('Failed to generate QR code for download.');
                    return;
                }
                canvas.toBlob(function(blob) {
                    const a = document.createElement('a');
                    const url = URL.createObjectURL(blob);
                    a.href = url;
                    a.download = shortCode + '.png';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                });
            });
        }
        
        function showUserAgentModal(index) {
            const visit = visitsData[index];
            if (!visit || !visit.userAgent) {
                alert('User agent data not available');
                return;
            }
            
            const ua = visit.userAgent;
            
            // Populate complete user agent
            document.getElementById('uaComplete').textContent = ua.complete || 'N/A';
            
            // Populate parsed data
            document.getElementById('uaBrowser').textContent = 
                ua.browser && ua.browser.name 
                    ? `${ua.browser.name}${ua.browser.version ? ' v' + ua.browser.version : ''}`
                    : 'Unknown';
            
            document.getElementById('uaOS').textContent = 
                ua.os && ua.os.name 
                    ? `${ua.os.name}${ua.os.version ? ' ' + ua.os.version : ''}`
                    : 'Unknown';
            
            document.getElementById('uaDevice').textContent = 
                ua.device 
                    ? `${ua.device.type || 'desktop'}${ua.device.model ? ' (' + ua.device.model + ')' : ''}`
                    : 'desktop';
            
            document.getElementById('uaEngine').textContent = 
                ua.engine && ua.engine.name 
                    ? `${ua.engine.name}${ua.engine.version ? ' v' + ua.engine.version : ''}`
                    : 'Unknown';
            
            document.getElementById('uaCPU').textContent = 
                ua.cpu && ua.cpu.architecture 
                    ? ua.cpu.architecture
                    : 'Unknown';
            
            // Show modal
            $('#userAgentModal').modal('show');
        }
    </script>
</body>
</html>
